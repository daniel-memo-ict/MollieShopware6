<sw-modal class="mollie-support-modal"
          title="Hello"
          variant="large"
          @modal-close="$emit('close')">

    <sw-container columns="10fr 4fr" gap="16px">
        <sw-container gap="16px" columns="1fr" align="start">
            <sw-text-field v-model="name"
                           label="Your name"
                           :placeholder="userName"
                           size="medium"/>

            <sw-email-field v-model="email"
                            label="Your email"
                            :placeholder="user.email"
                            size="medium"/>

            <sw-text-field v-model="subject"
                           label="Subject"
                           size="medium" />

            <sw-text-editor v-model="message"
                            label="Message"/>
        </sw-container>

        <sw-description-list>
            <dt>Collected data:</dt>

            <dt>Shopware version</dt>
            <dd>{{ shopwareVersion }}</dd>

            <template v-if="molliePlugin">
                <dt>{{ molliePlugin.label }}</dt>
                <dd>{{ mollieVersion }}</dd>
            </template>

            <dt>Other:</dt>
            <dd v-if="molliePlugin">
                {{ molliePlugin.label }} log files
            </dd>
            <dd v-if="molliePlugin">
                {{ molliePlugin.label }} configuration
                <sw-help-text text="API keys are excluded"/>
            </dd>


            <sw-loader v-if="isLoading"/>
        </sw-description-list>

        <sw-loader v-if="isSubmitting"/>
    </sw-container>

    <template #modal-footer>
        <sw-button size="small"
                   :isLoading="isSubmitting"
                   @click="$emit('close')">
            Cancel
        </sw-button>

        <sw-button-process size="small"
                           variant="primary"
                           :animationTimeout="2500"
                           :disabled="isLoading || !canSubmit"
                           :isLoading="isSubmitting"
                           :processSuccess="mailSent"
                           @click="onRequestSupport"
                           @process-finish="mailSent = false">
            Request support
        </sw-button-process>
    </template>
</sw-modal>
